(function(a){})(this.jQuery);window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){console.log(Array.prototype.slice.call(arguments))}};(function(b){var a=b.write;b.write=function(c){log("document.write(): ",arguments);if(/docwriteregexwhitelist/.test(c)){a.apply(b,arguments)}}})(document);(function(d){function b(k){var j=d('meta[name="csrf-token"]').attr("content");if(j){k.setRequestHeader("X-CSRF-Token",j)}}if("ajaxPrefilter" in d){d.ajaxPrefilter(function(j,l,k){b(k)})}else{d(document).ajaxSend(function(j,k){b(k)})}function c(m,j,l){var k=d.Event(j);m.trigger(k,l);return k.result!==false}function i(m){var o,k,n,j=m.data("type")||(d.ajaxSettings&&d.ajaxSettings.dataType);if(c(m,"ajax:before")){if(m.is("form")){o=m.attr("method");k=m.attr("action");n=m.serializeArray();var l=m.data("ujs:submit-button");if(l){n.push(l);m.data("ujs:submit-button",null)}}else{o=m.data("method");k=m.attr("href");n=null}d.ajax({url:k,type:o||"GET",data:n,dataType:j,beforeSend:function(q,p){if(p.dataType===undefined){q.setRequestHeader("accept","*/*;q=0.5, "+p.accepts.script)}return c(m,"ajax:beforeSend",[q,p])},success:function(q,p,r){m.trigger("ajax:success",[q,p,r])},complete:function(q,p){m.trigger("ajax:complete",[q,p])},error:function(r,p,q){m.trigger("ajax:error",[r,p,q])}})}}function f(n){var k=n.attr("href"),p=n.data("method"),l=d("meta[name=csrf-token]").attr("content"),o=d("meta[name=csrf-param]").attr("content"),m=d('<form method="post" action="'+k+'"></form>'),j='<input name="_method" value="'+p+'" type="hidden" />';if(o!==undefined&&l!==undefined){j+='<input name="'+o+'" value="'+l+'" type="hidden" />'}m.hide().append(j).appendTo("body");m.submit()}function g(j){j.find("input[data-disable-with]").each(function(){var k=d(this);k.data("ujs:enable-with",k.val()).val(k.data("disable-with")).attr("disabled","disabled")})}function a(j){j.find("input[data-disable-with]").each(function(){var k=d(this);k.val(k.data("ujs:enable-with")).removeAttr("disabled")})}function h(j){var k=j.data("confirm");return !k||(c(j,"confirm")&&confirm(k))}function e(k){var j=false;k.find("input[name][required]").each(function(){if(!d(this).val()){j=true}});return j}d("a[data-confirm], a[data-method], a[data-remote]").live("click.rails",function(k){var j=d(this);if(!h(j)){return false}if(j.data("remote")!=undefined){i(j);return false}else{if(j.data("method")){f(j);return false}}});d("form").live("submit.rails",function(l){var j=d(this),k=j.data("remote")!=undefined;if(!h(j)){return false}if(e(j)){return !k}if(k){i(j);return false}else{setTimeout(function(){g(j)},13)}});d("form input[type=submit], form button[type=submit], form button:not([type])").live("click.rails",function(){var k=d(this);if(!h(k)){return false}var j=k.attr("name"),l=j?{name:j,value:k.val()}:null;k.closest("form").data("ujs:submit-button",l)});d("form").live("ajax:beforeSend.rails",function(j){if(this==j.target){g(d(this))}});d("form").live("ajax:complete.rails",function(j){if(this==j.target){a(d(this))}})})(jQuery);(function(a){a.prettyPhoto={version:"3.0"};a.fn.prettyPhoto=function(d){d=jQuery.extend({animation_speed:"fast",slideshow:false,autoplay_slideshow:false,opacity:0.8,show_title:true,allow_resize:true,default_width:500,default_height:344,counter_separator_label:"/",theme:"facebook",hideflash:false,wmode:"opaque",autoplay:true,modal:false,overlay_gallery:true,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},markup:'<div class="pp_pic_holder">       <div class="ppt">&nbsp;</div>       <div class="pp_top">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>       <div class="pp_content_container">        <div class="pp_left">        <div class="pp_right">         <div class="pp_content">          <div class="pp_loaderIcon"></div>          <div class="pp_fade">           <a href="#" class="pp_expand" title="Expand the image">Expand</a>           <div class="pp_hoverContainer">            <a class="pp_next" href="#">next</a>            <a class="pp_previous" href="#">previous</a>           </div>           <div id="pp_full_res"></div>           <div class="pp_details clearfix">            <p class="pp_description"></p>            <a class="pp_close" href="#">Close</a>            <div class="pp_nav">             <a href="#" class="pp_arrow_previous">Previous</a>             <p class="currentTextHolder">0/0</p>             <a href="#" class="pp_arrow_next">Next</a>            </div>           </div>          </div>         </div>        </div>        </div>       </div>       <div class="pp_bottom">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>      </div>      <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery">         <a href="#" class="pp_arrow_previous">Previous</a>         <ul>          {gallery}         </ul>         <a href="#" class="pp_arrow_next">Next</a>        </div>',image_markup:'<img id="fullResImage" src="" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline clearfix">{content}</div>',custom_markup:""},d);var i=this,h=false,s,m,n,o,r,u,e=a(window).height(),x=a(window).width(),f;doresize=true,scroll_pos=v();a(window).unbind("resize").resize(function(){l();q()});if(d.keyboard_shortcuts){a(document).unbind("keydown").keydown(function(y){if(typeof $pp_pic_holder!="undefined"){if($pp_pic_holder.is(":visible")){switch(y.keyCode){case 37:a.prettyPhoto.changePage("previous");break;case 39:a.prettyPhoto.changePage("next");break;case 27:if(!settings.modal){a.prettyPhoto.close()}break}return false}}})}a.prettyPhoto.initialize=function(){settings=d;if(a.browser.msie&&parseInt(a.browser.version)==6){settings.theme="light_square"}t(this);if(settings.allow_resize){a(window).scroll(function(){l()})}l();set_position=jQuery.inArray(a(this).attr("href"),pp_images);a.prettyPhoto.open();return false};a.prettyPhoto.open=function(y){if(typeof settings=="undefined"){settings=d;if(a.browser.msie&&a.browser.version==6){settings.theme="light_square"}t(y.target);pp_images=a.makeArray(arguments[0]);pp_titles=(arguments[1])?a.makeArray(arguments[1]):a.makeArray("");pp_descriptions=(arguments[2])?a.makeArray(arguments[2]):a.makeArray("");isSet=(pp_images.length>1)?true:false;set_position=0}if(a.browser.msie&&a.browser.version==6){a("select").css("visibility","hidden")}if(settings.hideflash){a("object,embed").css("visibility","hidden")}g(a(pp_images).size());a(".pp_loaderIcon").show();if($ppt.is(":hidden")){$ppt.css("opacity",0).show()}$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find(".currentTextHolder").text((set_position+1)+settings.counter_separator_label+a(pp_images).size());$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position]));(settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined")?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;");movie_width=(parseFloat(b("width",pp_images[set_position])))?b("width",pp_images[set_position]):settings.default_width.toString();movie_height=(parseFloat(b("height",pp_images[set_position])))?b("height",pp_images[set_position]):settings.default_height.toString();if(movie_width.indexOf("%")!=-1||movie_height.indexOf("%")!=-1){movie_height=parseFloat((a(window).height()*parseFloat(movie_height)/100)-150);movie_width=parseFloat((a(window).width()*parseFloat(movie_width)/100)-150);h=true}else{h=false}$pp_pic_holder.fadeIn(function(){imgPreloader="";switch(w(pp_images[set_position])){case"image":imgPreloader=new Image();nextImage=new Image();if(isSet&&set_position>a(pp_images).size()){nextImage.src=pp_images[set_position+1]}prevImage=new Image();if(isSet&&pp_images[set_position-1]){prevImage.src=pp_images[set_position-1]}$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup;$pp_pic_holder.find("#fullResImage").attr("src",pp_images[set_position]);imgPreloader.onload=function(){s=k(imgPreloader.width,imgPreloader.height);_showContent()};imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");a.prettyPhoto.close()};imgPreloader.src=pp_images[set_position];break;case"youtube":s=k(movie_width,movie_height);movie="http://www.youtube.com/v/"+b("v",pp_images[set_position]);if(settings.autoplay){movie+="&autoplay=1"}toInject=settings.flash_markup.replace(/{width}/g,s.width).replace(/{height}/g,s.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":s=k(movie_width,movie_height);movie_id=pp_images[set_position];var A=/http:\/\/(www\.)?vimeo.com\/(\d+)/;var z=movie_id.match(A);movie="http://player.vimeo.com/video/"+z[2]+"?title=0&amp;byline=0&amp;portrait=0";if(settings.autoplay){movie+="&autoplay=1;"}vimeo_width=s.width+"/embed/?moog_width="+s.width;toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,s.height).replace(/{path}/g,movie);break;case"quicktime":s=k(movie_width,movie_height);s.height+=15;s.contentHeight+=15;s.containerHeight+=15;toInject=settings.quicktime_markup.replace(/{width}/g,s.width).replace(/{height}/g,s.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":s=k(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf("?"));toInject=settings.flash_markup.replace(/{width}/g,s.width).replace(/{height}/g,s.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":s=k(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1);toInject=settings.iframe_markup.replace(/{width}/g,s.width).replace(/{height}/g,s.height).replace(/{path}/g,frame_url);break;case"custom":s=k(movie_width,movie_height);toInject=settings.custom_markup;break;case"inline":myClone=a(pp_images[set_position]).clone().css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline clearfix"></div></div>').appendTo(a("body"));s=k(a(myClone).width(),a(myClone).height());a(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,a(pp_images[set_position]).html());break}if(!imgPreloader){$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;_showContent()}});return false};a.prettyPhoto.changePage=function(y){currentGalleryPage=0;if(y=="previous"){set_position--;if(set_position<0){set_position=0;return}}else{if(y=="next"){set_position++;if(set_position>a(pp_images).size()-1){set_position=0}}else{set_position=y}}if(!doresize){doresize=true}a(".pp_contract").removeClass("pp_contract").addClass("pp_expand");j(function(){a.prettyPhoto.open()})};a.prettyPhoto.changeGalleryPage=function(y){if(y=="next"){currentGalleryPage++;if(currentGalleryPage>totalPage){currentGalleryPage=0}}else{if(y=="previous"){currentGalleryPage--;if(currentGalleryPage<0){currentGalleryPage=totalPage}}else{currentGalleryPage=y}}itemsToSlide=(currentGalleryPage==totalPage)?pp_images.length-((totalPage)*itemsPerPage):itemsPerPage;$pp_pic_holder.find(".pp_gallery li").each(function(z){a(this).animate({left:(z*itemWidth)-((itemsToSlide*itemWidth)*currentGalleryPage)})})};a.prettyPhoto.startSlideshow=function(){if(typeof f=="undefined"){$pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){a.prettyPhoto.stopSlideshow();return false});f=setInterval(a.prettyPhoto.startSlideshow,settings.slideshow)}else{a.prettyPhoto.changePage("next")}};a.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){a.prettyPhoto.startSlideshow();return false});clearInterval(f);f=undefined};a.prettyPhoto.close=function(){clearInterval(f);$pp_pic_holder.stop().find("object,embed").css("visibility","hidden");a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){a(this).remove()});$pp_overlay.fadeOut(settings.animation_speed,function(){if(a.browser.msie&&a.browser.version==6){a("select").css("visibility","visible")}if(settings.hideflash){a("object,embed").css("visibility","visible")}a(this).remove();a(window).unbind("scroll");settings.callback();doresize=true;m=false;delete settings})};_showContent=function(){a(".pp_loaderIcon").hide();$ppt.fadeTo(settings.animation_speed,1);projectedTop=scroll_pos.scrollTop+((e/2)-(s.containerHeight/2));if(projectedTop<0){projectedTop=0}$pp_pic_holder.find(".pp_content").animate({height:s.contentHeight},settings.animation_speed);$pp_pic_holder.animate({top:projectedTop,left:(x/2)-(s.containerWidth/2),width:s.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(s.height).width(s.width);$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);if(isSet&&w(pp_images[set_position])=="image"){$pp_pic_holder.find(".pp_hoverContainer").show()}else{$pp_pic_holder.find(".pp_hoverContainer").hide()}if(s.resized){a("a.pp_expand,a.pp_contract").fadeIn(settings.animation_speed)}if(settings.autoplay_slideshow&&!f&&!m){a.prettyPhoto.startSlideshow()}settings.changepicturecallback();m=true});c()};function j(y){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){a(".pp_loaderIcon").show();y()})}function g(y){if(set_position==y-1){$pp_pic_holder.find("a.pp_next").css("visibility","hidden");$pp_pic_holder.find("a.pp_next").addClass("disabled").unbind("click")}else{$pp_pic_holder.find("a.pp_next").css("visibility","visible");$pp_pic_holder.find("a.pp_next.disabled").removeClass("disabled").bind("click",function(){a.prettyPhoto.changePage("next");return false})}if(set_position==0){$pp_pic_holder.find("a.pp_previous").css("visibility","hidden").addClass("disabled").unbind("click")}else{$pp_pic_holder.find("a.pp_previous.disabled").css("visibility","visible").removeClass("disabled").bind("click",function(){a.prettyPhoto.changePage("previous");return false})}(y>1)?a(".pp_nav").show():a(".pp_nav").hide()}function k(z,y){resized=false;p(z,y);imageWidth=z,imageHeight=y;if(((u>x)||(r>e))&&doresize&&settings.allow_resize&&!h){resized=true,fitting=false;while(!fitting){if((u>x)){imageWidth=(x-200);imageHeight=(y/z)*imageWidth}else{if((r>e)){imageHeight=(e-200);imageWidth=(z/y)*imageHeight}else{fitting=true}}r=imageHeight,u=imageWidth}p(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(r),containerWidth:Math.floor(u)+40,contentHeight:Math.floor(n),contentWidth:Math.floor(o),resized:resized}}function p(z,y){z=parseFloat(z);y=parseFloat(y);$pp_details=$pp_pic_holder.find(".pp_details");$pp_details.width(z);detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom"));$pp_details=$pp_details.clone().appendTo(a("body")).css({position:"absolute",top:-10000});detailsHeight+=$pp_details.height();detailsHeight=(detailsHeight<=34)?36:detailsHeight;if(a.browser.msie&&a.browser.version==7){detailsHeight+=8}$pp_details.remove();n=y+detailsHeight;o=z;r=n+$ppt.height()+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();u=z}function w(y){if(y.match(/youtube\.com\/watch/i)){return"youtube"}else{if(y.match(/vimeo\.com/i)){return"vimeo"}else{if(y.indexOf(".mov")!=-1){return"quicktime"}else{if(y.indexOf(".swf")!=-1){return"flash"}else{if(y.indexOf("iframe")!=-1){return"iframe"}else{if(y.indexOf("custom")!=-1){return"custom"}else{if(y.substr(0,1)=="#"){return"inline"}else{return"image"}}}}}}}}function l(){if(doresize&&typeof $pp_pic_holder!="undefined"){scroll_pos=v();titleHeight=$ppt.height(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=(e/2)+scroll_pos.scrollTop-(contentHeight/2);$pp_pic_holder.css({top:projectedTop,left:(x/2)+scroll_pos.scrollLeft-(contentwidth/2)})}}function v(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}}else{if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}}else{if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}}}}}function q(){e=a(window).height(),x=a(window).width();if(typeof $pp_overlay!="undefined"){$pp_overlay.height(a(document).height())}}function c(){if(isSet&&settings.overlay_gallery&&w(pp_images[set_position])=="image"){itemWidth=52+5;navWidth=(settings.theme=="facebook")?58:38;itemsPerPage=Math.floor((s.containerWidth-100-navWidth)/itemWidth);itemsPerPage=(itemsPerPage<pp_images.length)?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_pic_holder.find(".pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous").hide()}else{$pp_pic_holder.find(".pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous").show()}galleryWidth=itemsPerPage*itemWidth+navWidth;$pp_pic_holder.find(".pp_gallery").width(galleryWidth).css("margin-left",-(galleryWidth/2));$pp_pic_holder.find(".pp_gallery ul").width(itemsPerPage*itemWidth).find("li.selected").removeClass("selected");goToPage=(Math.floor(set_position/itemsPerPage)<=totalPage)?Math.floor(set_position/itemsPerPage):totalPage;if(itemsPerPage){$pp_pic_holder.find(".pp_gallery").hide().show().removeClass("disabled")}else{$pp_pic_holder.find(".pp_gallery").hide().addClass("disabled")}a.prettyPhoto.changeGalleryPage(goToPage);$pp_pic_holder.find(".pp_gallery ul li:eq("+set_position+")").addClass("selected")}else{$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave");$pp_pic_holder.find(".pp_gallery").hide()}}function t(y){theRel=a(y).attr("rel");galleryRegExp=/\[(?:.*)\]/;isSet=(galleryRegExp.exec(theRel))?true:false;pp_images=(isSet)?jQuery.map(i,function(D,C){if(a(D).attr("rel").indexOf(theRel)!=-1){return a(D).attr("href")}}):a.makeArray(a(y).attr("href"));pp_titles=(isSet)?jQuery.map(i,function(D,C){if(a(D).attr("rel").indexOf(theRel)!=-1){return(a(D).find("img").attr("alt"))?a(D).find("img").attr("alt"):""}}):a.makeArray(a(y).find("img").attr("alt"));pp_descriptions=(isSet)?jQuery.map(i,function(D,C){if(a(D).attr("rel").indexOf(theRel)!=-1){return(a(D).attr("title"))?a(D).attr("title"):""}}):a.makeArray(a(y).attr("title"));a("body").append(settings.markup);$pp_pic_holder=a(".pp_pic_holder"),$ppt=a(".ppt"),$pp_overlay=a("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var A=0;A<pp_images.length;A++){var B=new RegExp("(.*?).(jpg|jpeg|png|gif)$");var z=B.exec(pp_images[A]);if(!z){classname="default"}else{classname=""}toInject+="<li class='"+classname+"'><a href='#'><img src='"+pp_images[A]+"' width='50' alt='' /></a></li>"}toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find("#pp_full_res").after(toInject);$pp_pic_holder.find(".pp_gallery .pp_arrow_next").click(function(){a.prettyPhoto.changeGalleryPage("next");a.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_gallery .pp_arrow_previous").click(function(){a.prettyPhoto.changeGalleryPage("previous");a.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()});itemWidth=52+5;$pp_pic_holder.find(".pp_gallery ul li").each(function(C){a(this).css({position:"absolute",left:C*itemWidth});a(this).find("a").unbind("click").click(function(){a.prettyPhoto.changePage(C);a.prettyPhoto.stopSlideshow();return false})})}if(settings.slideshow){$pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>');$pp_pic_holder.find(".pp_nav .pp_play").click(function(){a.prettyPhoto.startSlideshow();return false})}$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme);$pp_overlay.css({opacity:0,height:a(document).height(),width:a(document).width()}).bind("click",function(){if(!settings.modal){a.prettyPhoto.close()}});a("a.pp_close").bind("click",function(){a.prettyPhoto.close();return false});a("a.pp_expand").bind("click",function(C){if(a(this).hasClass("pp_expand")){a(this).removeClass("pp_expand").addClass("pp_contract");doresize=false}else{a(this).removeClass("pp_contract").addClass("pp_expand");doresize=true}j(function(){a.prettyPhoto.open()});return false});$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){a.prettyPhoto.changePage("previous");a.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){a.prettyPhoto.changePage("next");a.prettyPhoto.stopSlideshow();return false});l()}return this.unbind("click").click(a.prettyPhoto.initialize)};function b(e,d){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+e+"=([^&#]*)";var g=new RegExp(c);var f=g.exec(d);return(f==null)?"":f[1]}})(jQuery);$(document).ready(function(){$.ninjaColorsSet({background:{backgroundColor:"#ccc",borderColor:"#999",color:"#000"},foreground:{backgroundColor:"#002e0a",borderColor:"#000",color:"#fff"},foregroundDisabled:{backgroundColor:"#002e0a",borderColor:"#000",color:"#fff"},foregroundSelected:{backgroundColor:"yellow",borderColor:"#900",color:"#fff"},foregroundSubmit:{backgroundColor:"#39c",borderColor:"#069",color:"#fff"},rating:{group:"#39c",single:"#c00",unselected:"#999"}})});(function(a){if(!a.ui||!a.ui.core||a.ui.version!="1.8.6"){
/*!
 * jQuery UI 1.8.6
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(b,d){b.ui=b.ui||{};if(b.ui.version){return}b.extend(b.ui,{version:"1.8.6",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});b.fn.extend({_focus:b.fn.focus,focus:function(e,f){return typeof e==="number"?this.each(function(){var g=this;setTimeout(function(){b(g).focus();if(f){f.call(g)}},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;if((b.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){e=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(b.curCSS(this,"position",1))&&(/(auto|scroll)/).test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0)}else{e=this.parents().filter(function(){return(/(auto|scroll)/).test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!e.length?b(document):e},zIndex:function(h){if(h!==d){return this.css("zIndex",h)}if(this.length){var f=b(this[0]),e,g;while(f.length&&f[0]!==document){e=f.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){g=parseInt(f.css("zIndex"),10);if(!isNaN(g)&&g!==0){return g}}f=f.parent()}}return 0},disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.each(["Width","Height"],function(g,e){var f=e==="Width"?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),k={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};function j(m,l,i,n){b.each(f,function(){l-=parseFloat(b.curCSS(m,"padding"+this,true))||0;if(i){l-=parseFloat(b.curCSS(m,"border"+this+"Width",true))||0}if(n){l-=parseFloat(b.curCSS(m,"margin"+this,true))||0}});return l}b.fn["inner"+e]=function(i){if(i===d){return k["inner"+e].call(this)}return this.each(function(){b(this).css(h,j(this,i)+"px")})};b.fn["outer"+e]=function(i,l){if(typeof i!=="number"){return k["outer"+e].call(this,i)}return this.each(function(){b(this).css(h,j(this,i,true,l)+"px")})}});function c(e){return !b(e).parents().andSelf().filter(function(){return b.curCSS(this,"visibility")==="hidden"||b.expr.filters.hidden(this)}).length}b.extend(b.expr[":"],{data:function(g,f,e){return !!b.data(g,e[3])},focusable:function(g){var j=g.nodeName.toLowerCase(),e=b.attr(g,"tabindex");if("area"===j){var i=g.parentNode,h=i.name,f;if(!g.href||!h||i.nodeName.toLowerCase()!=="map"){return false}f=b("img[usemap=#"+h+"]")[0];return !!f&&c(f)}return(/input|select|textarea|button|object/.test(j)?!g.disabled:"a"==j?g.href||!isNaN(e):!isNaN(e))&&c(g)},tabbable:function(f){var e=b.attr(f,"tabindex");return(isNaN(e)||e>=0)&&b(f).is(":focusable")}});b(function(){var e=document.body,f=e.appendChild(f=document.createElement("div"));b.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});b.support.minHeight=f.offsetHeight===100;b.support.selectstart="onselectstart" in f;e.removeChild(f).style.display="none"});b.extend(b.ui,{plugin:{add:function(f,g,j){var h=b.ui[f].prototype;for(var e in j){h.plugins[e]=h.plugins[e]||[];h.plugins[e].push([g,j[e]])}},call:function(e,g,f){var j=e.plugins[g];if(!j||!e.element[0].parentNode){return}for(var h=0;h<j.length;h++){if(e.options[j[h][0]]){j[h][1].apply(e.element,f)}}}},contains:function(f,e){return document.compareDocumentPosition?f.compareDocumentPosition(e)&16:f!==e&&f.contains(e)},hasScroll:function(h,f){if(b(h).css("overflow")==="hidden"){return false}var e=(f&&f==="left")?"scrollLeft":"scrollTop",g=false;if(h[e]>0){return true}h[e]=1;g=(h[e]>0);h[e]=0;return g},isOverAxis:function(f,e,g){return(f>e)&&(f<(e+g))},isOver:function(j,f,i,h,e,g){return b.ui.isOverAxis(j,i,e)&&b.ui.isOverAxis(f,h,g)}})})(jQuery)}if(!a.ui||!a.ui.widget||a.ui.version!="1.8.6"){
/*!
 * jQuery UI Widget 1.8.6
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(c,e){if(c.cleanData){var d=c.cleanData;c.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){c(h).triggerHandler("remove")}d(f)}}else{var b=c.fn.remove;c.fn.remove=function(f,g){return this.each(function(){if(!g){if(!f||c.filter(f,[this]).length){c("*",this).add([this]).each(function(){c(this).triggerHandler("remove")})}}return b.call(c(this),f,g)})}}c.widget=function(g,i,f){var h=g.split(".")[0],k;g=g.split(".")[1];k=h+"-"+g;if(!f){f=i;i=c.Widget}c.expr[":"][k]=function(l){return !!c.data(l,g)};c[h]=c[h]||{};c[h][g]=function(l,m){if(arguments.length){this._createWidget(l,m)}};var j=new i();j.options=c.extend(true,{},j.options);c[h][g].prototype=c.extend(true,j,{namespace:h,widgetName:g,widgetEventPrefix:c[h][g].prototype.widgetEventPrefix||g,widgetBaseClass:k},f);c.widget.bridge(g,c[h][g])};c.widget.bridge=function(g,f){c.fn[g]=function(j){var h=typeof j==="string",i=Array.prototype.slice.call(arguments,1),k=this;j=!h&&i.length?c.extend.apply(null,[true,j].concat(i)):j;if(h&&j.charAt(0)==="_"){return k}if(h){this.each(function(){var l=c.data(this,g),m=l&&c.isFunction(l[j])?l[j].apply(l,i):l;if(m!==l&&m!==e){k=m;return false}})}else{this.each(function(){var l=c.data(this,g);if(l){l.option(j||{})._init()}else{c.data(this,g,new f(j,this))}})}return k}};c.Widget=function(f,g){if(arguments.length){this._createWidget(f,g)}};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(g,h){c.data(h,this.widgetName,this);this.element=c(h);this.options=c.extend(true,{},this.options,this._getCreateOptions(),g);var f=this;this.element.bind("remove."+this.widgetName,function(){f.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(g,h){var f=g;if(arguments.length===0){return c.extend({},this.options)}if(typeof g==="string"){if(h===e){return this.options[g]}f={};f[g]=h}this._setOptions(f);return this},_setOptions:function(g){var f=this;c.each(g,function(h,i){f._setOption(h,i)});return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget()[g?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",g)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(g,h,j){var l=this.options[g];h=c.Event(h);h.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();j=j||{};if(h.originalEvent){for(var f=c.event.props.length,k;f;){k=c.event.props[--f];h[k]=h.originalEvent[k]}}this.element.trigger(h,j);return !(c.isFunction(l)&&l.call(this.element[0],h,j)===false||h.isDefaultPrevented())}}})(jQuery)}if(!a.ui||!a.ui.mouse||a.ui.version!="1.8.6"){
/*!
 * jQuery UI Mouse 1.8.6
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(b,c){b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(e){return d._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(d._preventClickEvent){d._preventClickEvent=false;e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(f){f.originalEvent=f.originalEvent||{};if(f.originalEvent.mouseHandled){return}(this._mouseStarted&&this._mouseUp(f));this._mouseDownEvent=f;var e=this,g=(f.which==1),d=(typeof this.options.cancel=="string"?b(f.target).parents().add(f.target).filter(this.options.cancel).length:false);if(!g||d||!this._mouseCapture(f)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(f)!==false);if(!this._mouseStarted){f.preventDefault();return true}}this._mouseMoveDelegate=function(h){return e._mouseMove(h)};this._mouseUpDelegate=function(h){return e._mouseUp(h)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();f.originalEvent.mouseHandled=true;return true},_mouseMove:function(d){if(b.browser.msie&&!(document.documentMode>=9)&&!d.button){return this._mouseUp(d)}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(d.target==this._mouseDownEvent.target);this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(d){return this.mouseDelayMet},_mouseStart:function(d){},_mouseDrag:function(d){},_mouseStop:function(d){},_mouseCapture:function(d){return true}})})(jQuery)}if(!a.ui||!a.ui.position||a.ui.version!="1.8.6"){(function(g,h){g.ui=g.ui||{};var e=/left|center|right/,f=/top|center|bottom/,b="center",c=g.fn.position,d=g.fn.offset;g.fn.position=function(j){if(!j||!j.of){return c.apply(this,arguments)}j=g.extend({},j);var n=g(j.of),m=n[0],p=(j.collision||"flip").split(" "),o=j.offset?j.offset.split(" "):[0,0],l,i,k;if(m.nodeType===9){l=n.width();i=n.height();k={top:0,left:0}}else{if(m.setTimeout){l=n.width();i=n.height();k={top:n.scrollTop(),left:n.scrollLeft()}}else{if(m.preventDefault){j.at="left top";l=i=0;k={top:j.of.pageY,left:j.of.pageX}}else{l=n.outerWidth();i=n.outerHeight();k=n.offset()}}}g.each(["my","at"],function(){var q=(j[this]||"").split(" ");if(q.length===1){q=e.test(q[0])?q.concat([b]):f.test(q[0])?[b].concat(q):[b,b]}q[0]=e.test(q[0])?q[0]:b;q[1]=f.test(q[1])?q[1]:b;j[this]=q});if(p.length===1){p[1]=p[0]}o[0]=parseInt(o[0],10)||0;if(o.length===1){o[1]=o[0]}o[1]=parseInt(o[1],10)||0;if(j.at[0]==="right"){k.left+=l}else{if(j.at[0]===b){k.left+=l/2}}if(j.at[1]==="bottom"){k.top+=i}else{if(j.at[1]===b){k.top+=i/2}}k.left+=o[0];k.top+=o[1];return this.each(function(){var t=g(this),v=t.outerWidth(),s=t.outerHeight(),u=parseInt(g.curCSS(this,"marginLeft",true))||0,r=parseInt(g.curCSS(this,"marginTop",true))||0,x=v+u+parseInt(g.curCSS(this,"marginRight",true))||0,y=s+r+parseInt(g.curCSS(this,"marginBottom",true))||0,w=g.extend({},k),q;if(j.my[0]==="right"){w.left-=v}else{if(j.my[0]===b){w.left-=v/2}}if(j.my[1]==="bottom"){w.top-=s}else{if(j.my[1]===b){w.top-=s/2}}w.left=parseInt(w.left);w.top=parseInt(w.top);q={left:w.left-u,top:w.top-r};g.each(["left","top"],function(A,z){if(g.ui.position[p[A]]){g.ui.position[p[A]][z](w,{targetWidth:l,targetHeight:i,elemWidth:v,elemHeight:s,collisionPosition:q,collisionWidth:x,collisionHeight:y,offset:o,my:j.my,at:j.at})}});if(g.fn.bgiframe){t.bgiframe()}t.offset(g.extend(w,{using:j.using}))})};g.ui.position={fit:{left:function(i,j){var l=g(window),k=j.collisionPosition.left+j.collisionWidth-l.width()-l.scrollLeft();i.left=k>0?i.left-k:Math.max(i.left-j.collisionPosition.left,i.left)},top:function(i,j){var l=g(window),k=j.collisionPosition.top+j.collisionHeight-l.height()-l.scrollTop();i.top=k>0?i.top-k:Math.max(i.top-j.collisionPosition.top,i.top)}},flip:{left:function(j,l){if(l.at[0]===b){return}var n=g(window),m=l.collisionPosition.left+l.collisionWidth-n.width()-n.scrollLeft(),i=l.my[0]==="left"?-l.elemWidth:l.my[0]==="right"?l.elemWidth:0,k=l.at[0]==="left"?l.targetWidth:-l.targetWidth,o=-2*l.offset[0];j.left+=l.collisionPosition.left<0?i+k+o:m>0?i+k+o:0},top:function(j,l){if(l.at[1]===b){return}var n=g(window),m=l.collisionPosition.top+l.collisionHeight-n.height()-n.scrollTop(),i=l.my[1]==="top"?-l.elemHeight:l.my[1]==="bottom"?l.elemHeight:0,k=l.at[1]==="top"?l.targetHeight:-l.targetHeight,o=-2*l.offset[1];j.top+=l.collisionPosition.top<0?i+k+o:m>0?i+k+o:0}}};if(!g.offset.setOffset){g.offset.setOffset=function(m,j){if(/static/.test(g.curCSS(m,"position"))){m.style.position="relative"}var l=g(m),o=l.offset(),i=parseInt(g.curCSS(m,"top",true),10)||0,n=parseInt(g.curCSS(m,"left",true),10)||0,k={top:(j.top-o.top)+i,left:(j.left-o.left)+n};if("using" in j){j.using.call(m,k)}else{l.css(k)}};g.fn.offset=function(i){var j=this[0];if(!j||!j.ownerDocument){return null}if(i){return this.each(function(){g.offset.setOffset(this,i)})}return d.call(this)}}}(jQuery))}if(!a.ui||!a.ui.draggable||a.ui.version!="1.8.6"){(function(b,c){b.widget("ui.draggable",b.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this},_mouseCapture:function(d){var e=this.options;if(this.helper||e.disabled||b(d.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(d);if(!this.handle){return false}return true},_mouseStart:function(d){var e=this.options;this.helper=this._createHelper(d);this._cacheHelperProportions();if(b.ui.ddmanager){b.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;(e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt));if(e.containment){this._setContainment()}if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();if(b.ui.ddmanager&&!e.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,d)}this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,true);return true},_mouseDrag:function(d,f){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!f){var e=this._uiHash();if(this._trigger("drag",d,e)===false){this._mouseUp({});return false}this.position=e.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(b.ui.ddmanager){b.ui.ddmanager.drag(this,d)}return false},_mouseStop:function(e){var f=false;if(b.ui.ddmanager&&!this.options.dropBehaviour){f=b.ui.ddmanager.drop(this,e)}if(this.dropped){f=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode){return false}if((this.options.revert=="invalid"&&!f)||(this.options.revert=="valid"&&f)||this.options.revert===true||(b.isFunction(this.options.revert)&&this.options.revert.call(this.element,f))){var d=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(d._trigger("stop",e)!==false){d._clear()}})}else{if(this._trigger("stop",e)!==false){this._clear()}}return false},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(d){var e=!this.options.handle||!b(this.options.handle,this.element).length?true:false;b(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==d.target){e=true}});return e},_createHelper:function(e){var f=this.options;var d=b.isFunction(f.helper)?b(f.helper.apply(this.element[0],[e])):(f.helper=="clone"?this.element.clone():this.element);if(!d.parents("body").length){d.appendTo((f.appendTo=="parent"?this.element[0].parentNode:f.appendTo))}if(d[0]!=this.element[0]&&!(/(fixed|absolute)/).test(d.css("position"))){d.css("position","absolute")}return d},_adjustOffsetFromHelper:function(d){if(typeof d=="string"){d=d.split(" ")}if(b.isArray(d)){d={left:+d[0],top:+d[1]||0}}if("left" in d){this.offset.click.left=d.left+this.margins.left}if("right" in d){this.offset.click.left=this.helperProportions.width-d.right+this.margins.left}if("top" in d){this.offset.click.top=d.top+this.margins.top}if("bottom" in d){this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.browser.msie)){d={top:0,left:0}}return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var d=this.element.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var g=this.options;if(g.containment=="parent"){g.containment=this.helper[0].parentNode}if(g.containment=="document"||g.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(g.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b(g.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(g.containment)&&g.containment.constructor!=Array){var e=b(g.containment)[0];if(!e){return}var f=b(g.containment).offset();var d=(b(e).css("overflow")!="hidden");this.containment=[f.left+(parseInt(b(e).css("borderLeftWidth"),10)||0)+(parseInt(b(e).css("paddingLeft"),10)||0)-this.margins.left,f.top+(parseInt(b(e).css("borderTopWidth"),10)||0)+(parseInt(b(e).css("paddingTop"),10)||0)-this.margins.top,f.left+(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(b(e).css("borderLeftWidth"),10)||0)-(parseInt(b(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,f.top+(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(b(e).css("borderTopWidth"),10)||0)-(parseInt(b(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else{if(g.containment.constructor==Array){this.containment=g.containment}}},_convertPositionTo:function(h,j){if(!j){j=this.position}var f=h=="absolute"?1:-1;var g=this.options,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(e[0].tagName);return{top:(j.top+this.offset.relative.top*f+this.offset.parent.top*f-(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:e.scrollTop()))*f)),left:(j.left+this.offset.relative.left*f+this.offset.parent.left*f-(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:e.scrollLeft())*f))}},_generatePosition:function(g){var j=this.options,d=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=(/(html|body)/i).test(d[0].tagName);var f=g.pageX;var e=g.pageY;if(this.originalPosition){if(this.containment){if(g.pageX-this.offset.click.left<this.containment[0]){f=this.containment[0]+this.offset.click.left}if(g.pageY-this.offset.click.top<this.containment[1]){e=this.containment[1]+this.offset.click.top}if(g.pageX-this.offset.click.left>this.containment[2]){f=this.containment[2]+this.offset.click.left}if(g.pageY-this.offset.click.top>this.containment[3]){e=this.containment[3]+this.offset.click.top}}if(j.grid){var i=this.originalPageY+Math.round((e-this.originalPageY)/j.grid[1])*j.grid[1];e=this.containment?(!(i-this.offset.click.top<this.containment[1]||i-this.offset.click.top>this.containment[3])?i:(!(i-this.offset.click.top<this.containment[1])?i-j.grid[1]:i+j.grid[1])):i;var h=this.originalPageX+Math.round((f-this.originalPageX)/j.grid[0])*j.grid[0];f=this.containment?(!(h-this.offset.click.left<this.containment[0]||h-this.offset.click.left>this.containment[2])?h:(!(h-this.offset.click.left<this.containment[0])?h-j.grid[0]:h+j.grid[0])):h}}return{top:(e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(k?0:d.scrollTop())))),left:(f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&b.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():k?0:d.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,e,f){f=f||this._uiHash();b.ui.plugin.call(this,d,[e,f]);if(d=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return b.Widget.prototype._trigger.call(this,d,e,f)},plugins:{},_uiHash:function(d){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.extend(b.ui.draggable,{version:"1.8.6"});b.ui.plugin.add("draggable","connectToSortable",{start:function(e,g){var f=b(this).data("draggable"),h=f.options,d=b.extend({},g,{item:f.element});f.sortables=[];b(h.connectToSortable).each(function(){var i=b.data(this,"sortable");if(i&&!i.options.disabled){f.sortables.push({instance:i,shouldRevert:i.options.revert});i._refreshItems();i._trigger("activate",e,d)}})},stop:function(e,g){var f=b(this).data("draggable"),d=b.extend({},g,{item:f.element});b.each(f.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;f.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(e);this.instance.options.helper=this.instance.options._helper;if(f.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",e,d)}})},drag:function(e,h){var g=b(this).data("draggable"),d=this;var f=function(k){var q=this.offset.click.top,p=this.offset.click.left;var i=this.positionAbs.top,m=this.positionAbs.left;var l=k.height,n=k.width;var r=k.top,j=k.left;return b.ui.isOver(i+q,m+p,r,j,l,n)};b.each(g.sortables,function(j){this.instance.positionAbs=g.positionAbs;this.instance.helperProportions=g.helperProportions;this.instance.offset.click=g.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=b(d).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return h.helper[0]};e.target=this.instance.currentItem[0];this.instance._mouseCapture(e,true);this.instance._mouseStart(e,true,true);this.instance.offset.click.top=g.offset.click.top;this.instance.offset.click.left=g.offset.click.left;this.instance.offset.parent.left-=g.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=g.offset.parent.top-this.instance.offset.parent.top;g._trigger("toSortable",e);g.dropped=this.instance.element;g.currentItem=g.element;this.instance.fromOutside=g}if(this.instance.currentItem){this.instance._mouseDrag(e)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",e,this.instance._uiHash(this.instance));this.instance._mouseStop(e,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}g._trigger("fromSortable",e);g.dropped=false}}})}});b.ui.plugin.add("draggable","cursor",{start:function(e,f){var d=b("body"),g=b(this).data("draggable").options;if(d.css("cursor")){g._cursor=d.css("cursor")}d.css("cursor",g.cursor)},stop:function(d,e){var f=b(this).data("draggable").options;if(f._cursor){b("body").css("cursor",f._cursor)}}});b.ui.plugin.add("draggable","iframeFix",{start:function(d,e){var f=b(this).data("draggable").options;b(f.iframeFix===true?"iframe":f.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(b(this).offset()).appendTo("body")})},stop:function(d,e){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});b.ui.plugin.add("draggable","opacity",{start:function(e,f){var d=b(f.helper),g=b(this).data("draggable").options;if(d.css("opacity")){g._opacity=d.css("opacity")}d.css("opacity",g.opacity)},stop:function(d,e){var f=b(this).data("draggable").options;if(f._opacity){b(e.helper).css("opacity",f._opacity)}}});b.ui.plugin.add("draggable","scroll",{start:function(e,f){var d=b(this).data("draggable");if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){d.overflowOffset=d.scrollParent.offset()}},drag:function(f,g){var e=b(this).data("draggable"),h=e.options,d=false;if(e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"){if(!h.axis||h.axis!="x"){if((e.overflowOffset.top+e.scrollParent[0].offsetHeight)-f.pageY<h.scrollSensitivity){e.scrollParent[0].scrollTop=d=e.scrollParent[0].scrollTop+h.scrollSpeed}else{if(f.pageY-e.overflowOffset.top<h.scrollSensitivity){e.scrollParent[0].scrollTop=d=e.scrollParent[0].scrollTop-h.scrollSpeed}}}if(!h.axis||h.axis!="y"){if((e.overflowOffset.left+e.scrollParent[0].offsetWidth)-f.pageX<h.scrollSensitivity){e.scrollParent[0].scrollLeft=d=e.scrollParent[0].scrollLeft+h.scrollSpeed}else{if(f.pageX-e.overflowOffset.left<h.scrollSensitivity){e.scrollParent[0].scrollLeft=d=e.scrollParent[0].scrollLeft-h.scrollSpeed}}}}else{if(!h.axis||h.axis!="x"){if(f.pageY-b(document).scrollTop()<h.scrollSensitivity){d=b(document).scrollTop(b(document).scrollTop()-h.scrollSpeed)}else{if(b(window).height()-(f.pageY-b(document).scrollTop())<h.scrollSensitivity){d=b(document).scrollTop(b(document).scrollTop()+h.scrollSpeed)}}}if(!h.axis||h.axis!="y"){if(f.pageX-b(document).scrollLeft()<h.scrollSensitivity){d=b(document).scrollLeft(b(document).scrollLeft()-h.scrollSpeed)}else{if(b(window).width()-(f.pageX-b(document).scrollLeft())<h.scrollSensitivity){d=b(document).scrollLeft(b(document).scrollLeft()+h.scrollSpeed)}}}}if(d!==false&&b.ui.ddmanager&&!h.dropBehaviour){b.ui.ddmanager.prepareOffsets(e,f)}}});b.ui.plugin.add("draggable","snap",{start:function(e,f){var d=b(this).data("draggable"),g=d.options;d.snapElements=[];b(g.snap.constructor!=String?(g.snap.items||":data(draggable)"):g.snap).each(function(){var i=b(this);var h=i.offset();if(this!=d.element[0]){d.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:h.top,left:h.left})}})},drag:function(v,q){var h=b(this).data("draggable"),s=h.options;var z=s.snapTolerance;var y=q.offset.left,x=y+h.helperProportions.width,g=q.offset.top,f=g+h.helperProportions.height;for(var w=h.snapElements.length-1;w>=0;w--){var u=h.snapElements[w].left,p=u+h.snapElements[w].width,n=h.snapElements[w].top,B=n+h.snapElements[w].height;if(!((u-z<y&&y<p+z&&n-z<g&&g<B+z)||(u-z<y&&y<p+z&&n-z<f&&f<B+z)||(u-z<x&&x<p+z&&n-z<g&&g<B+z)||(u-z<x&&x<p+z&&n-z<f&&f<B+z))){if(h.snapElements[w].snapping){(h.options.snap.release&&h.options.snap.release.call(h.element,v,b.extend(h._uiHash(),{snapItem:h.snapElements[w].item})))}h.snapElements[w].snapping=false;continue}if(s.snapMode!="inner"){var e=Math.abs(n-f)<=z;var A=Math.abs(B-g)<=z;var k=Math.abs(u-x)<=z;var m=Math.abs(p-y)<=z;if(e){q.position.top=h._convertPositionTo("relative",{top:n-h.helperProportions.height,left:0}).top-h.margins.top}if(A){q.position.top=h._convertPositionTo("relative",{top:B,left:0}).top-h.margins.top}if(k){q.position.left=h._convertPositionTo("relative",{top:0,left:u-h.helperProportions.width}).left-h.margins.left}if(m){q.position.left=h._convertPositionTo("relative",{top:0,left:p}).left-h.margins.left}}var j=(e||A||k||m);if(s.snapMode!="outer"){var e=Math.abs(n-g)<=z;var A=Math.abs(B-f)<=z;var k=Math.abs(u-y)<=z;var m=Math.abs(p-x)<=z;if(e){q.position.top=h._convertPositionTo("relative",{top:n,left:0}).top-h.margins.top}if(A){q.position.top=h._convertPositionTo("relative",{top:B-h.helperProportions.height,left:0}).top-h.margins.top}if(k){q.position.left=h._convertPositionTo("relative",{top:0,left:u}).left-h.margins.left}if(m){q.position.left=h._convertPositionTo("relative",{top:0,left:p-h.helperProportions.width}).left-h.margins.left}}if(!h.snapElements[w].snapping&&(e||A||k||m||j)){(h.options.snap.snap&&h.options.snap.snap.call(h.element,v,b.extend(h._uiHash(),{snapItem:h.snapElements[w].item})))}h.snapElements[w].snapping=(e||A||k||m||j)}}});b.ui.plugin.add("draggable","stack",{start:function(e,f){var h=b(this).data("draggable").options;var g=b.makeArray(b(h.stack)).sort(function(j,i){return(parseInt(b(j).css("zIndex"),10)||0)-(parseInt(b(i).css("zIndex"),10)||0)});if(!g.length){return}var d=parseInt(g[0].style.zIndex)||0;b(g).each(function(j){this.style.zIndex=d+j});this[0].style.zIndex=d+g.length}});b.ui.plugin.add("draggable","zIndex",{start:function(e,f){var d=b(f.helper),g=b(this).data("draggable").options;if(d.css("zIndex")){g._zIndex=d.css("zIndex")}d.css("zIndex",g.zIndex)},stop:function(d,e){var f=b(this).data("draggable").options;if(f._zIndex){b(e.helper).css("zIndex",f._zIndex)}}})})(jQuery)}a.fn.ninjaButtonCreate=function(b){var c=a.extend({colors:a.ninjaColorsGet(),icon:null,onDeselect:function(){},onSelect:function(){},radius:a.ninjaRadius,size:null,state:null,title:null},b);return this.each(function(e,d){a(d).data({options:c});a(d).addClass("ninjaPlastic").ninjaRadius({radius:c.radius});if(c.size){$button.css({fontSize:c.size})}if(a(d).is("input")){if(c.title){a(d).val(c.title)}}else{if(c.title){a(d).text(c.title)}if(c.icon){if(c.title){a(d).prepend("&#160;")}a(d).prepend("<span/>");a("span",d).ninjaIconCreate(c.icon).css({height:a(d).height(),position:"relative",top:"-2px"})}}if(c.state=="disabled"){a(d).ninjaButtonDisable()}else{a(d).ninjaButtonEnable()}})};a.fn.ninjaButtonDeselect=function(b){return this.each(function(e,d){var c=a(d).data().options;a(d).removeClass("ninjaSelected");if(a(d).attr("type")=="submit"){a(d).css(c.colors.foregroundSubmit)}else{a(d).css(c.colors.foreground)}a(".ninjaIcon",d).ninjaIconLightness();c.onDeselect.call(d,b)})};a.fn.ninjaButtonDisable=function(){return this.each(function(d,c){var b=a(c).data().options;a(c).animate({opacity:0.5}).removeClass("ninjaEnabled").css(b.colors.foregroundDisabled);if(a(c).is("input")){a(c).attr("disabled","disabled")}a(c).unbind("click")})};a.fn.ninjaButtonEnable=function(){return this.each(function(d,c){var b=a(c).data().options;a(c).animate({opacity:1}).addClass("ninjaEnabled");if(a(c).is("input")){a(c).removeAttr("disabled")}if(b.state=="selected"||a(c).hasClass("ninjaSelected")){a(c).addClass("ninjaSelected").css(b.colors.foregroundSelected)}else{if(a(c).is("input")&&a(c).attr("type")=="submit"){a(c).css(b.colors.foregroundSubmit)}else{a(c).css(b.colors.foreground)}}a(".ninjaIcon",c).ninjaIconLightness();a(c).click(function(e){if(a(c).hasClass("ninjaSelected")){a(c).ninjaButtonDeselect(e)}else{a(c).ninjaButtonSelect(e)}})})};a.fn.ninjaButtonSelect=function(b){return this.each(function(e,d){var c=a(d).data().options;a(d).addClass("ninjaSelected").css(c.colors.foregroundSelected);a(".ninjaIcon",d).ninjaIconLightness();c.onSelect.call(d,b)})};a.ninjaColors={background:{backgroundColor:"#fff",borderColor:"#ccc",color:"#333"},foreground:{backgroundColor:"#ccc",borderColor:"#999",color:"#000"},foregroundDisabled:{backgroundColor:"#ccc",borderColor:"#999",color:"#000"},foregroundEnabled:{backgroundColor:"#999",borderColor:"#666",color:"#000"},foregroundSelected:{backgroundColor:"#c00",borderColor:"#900",color:"#fff"},foregroundSubmit:{backgroundColor:"#39c",borderColor:"#069",color:"#fff"},rating:{group:"#39c",single:"#c00",unselected:"#999"}};a.ninjaColorsGet=function(b){return a.extend({},a.ninjaColors,b)};a.ninjaColorsSet=function(b){a.extend(a.ninjaColors,b)};a.fn.ninjaLightness=function(){var d=this.css("background-color");if(d!=undefined&&d!==""&&d!="transparent"&&d!="rgba(0, 0, 0, 0)"){function f(g){return(299*g[0]+587*g[1]+114*g[2])/1000}var b;if(b=(/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/).exec(d)){return f([b[1],b[2],b[3]])}else{if(b=(/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/).exec(d)){return f([parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55])}else{if(b=(/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/).exec(d)){return f([parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)])}else{if(b=(/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/).exec(d)){return f([parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)])}else{var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};return f(c[jQuery.trim(d).toLowerCase()])}}}}}else{var e=this.parent();if(typeof(e)=="array"&&e.length()>0){e.ninjaLightness()}else{return 255}}};a.fn.ninjaDrawersCreate=function(b){var c=a.extend({colors:a.ninjaColorsGet(),onClose:function(){},onOpen:function(){},radius:a.ninjaRadius,selected:null},b);this.each(function(d,e){a(e).data({options:c});a(e).hide().addClass("ninjaPaper").css(c.colors.background).before("<div/>");var f=a(e).prev("div").addClass("ninjaPlastic ninjaEnabled").css(c.colors.foreground).text(a(e).attr("title")).prepend("<span/>&#160;");a("span",f).ninjaIconCreate("right").position({at:"left center",of:f,offset:a(f).css("padding-left")+" 0",my:"left center"});a(f).click(function(){if(a(f).hasClass("ninjaSelected")){a(e).ninjaDrawersClose()}else{a(e).ninjaDrawersOpen()}})});this.first().prev("div.ninjaPlastic").ninjaRadius({corners:"top",radius:c.radius});this.last().css({borderBottomStyle:"solid"}).ninjaRadius({corners:"bottom",radius:c.radius}).prev("div.ninjaPlastic").ninjaRadius({corners:"bottom",radius:c.radius}).addClass("ninjaLast");if(c.selected!=null){a(c.selected).ninjaDrawersOpen()}return this};a.fn.ninjaDrawersClose=function(){return this.each(function(c,e){var b=a(e).data().options;b.onClose.call(e);var f=a(e).prev("div.ninjaPlastic");var d=a("span.ninjaIcon",f);a(e).slideUp(function(){a(f).removeClass("ninjaSelected").css(b.colors.foreground);a(d).addClass("ninjaIcon-right").removeClass("ninjaIcon-down");if(a(f).hasClass("ninjaLast")){a(f).ninjaRadius({corners:"bottom",radius:b.radius})}})})};a.fn.ninjaDrawersOpen=function(){return this.each(function(c,e){var b=a(e).data().options;b.onOpen.call(e);var f=a(e).prev("div.ninjaPlastic");var d=a("span.ninjaIcon",f);a(f).addClass("ninjaSelected").css(b.colors.foregroundSelected);a(d).addClass("ninjaIcon-down").removeClass("ninjaIcon-right");a(e).slideDown();if(a(f).hasClass("ninjaLast")){a(f).ninjaRadius({radius:"0"})}})};a.fn.ninjaFilmstripCreate=function(m){var n=a.extend({colors:a.ninjaColorsGet(),frameHeight:100,frameWidth:100,icon:null,onBack:function(){},onForward:function(){},radius:a.ninjaRadius,seconds:0,show:3,title:null},m);var d=this.each(function(o,p){a(p).addClass("ninjaFilmstripFrame").css({borderColor:n.colors.background.borderColor,height:n.frameHeight,width:n.frameWidth})}).wrapAll('<span class="ninjaFilmstripReel"/>').parent();var k=a(d).wrap('<span class="ninjaFilmstripView"/>').parent().css(n.colors.background);var e=a(k).wrap('<div class="ninjaFilmstrip"/>').parent();var i=a(e).prepend('<div class="ninjaPlastic ninjaFilmstripBar"/>').find(".ninjaFilmstripBar").css(n.colors.foreground).ninjaRadius({corners:"top",radius:n.radius});if(n.title){a(i).text(n.title)}if(n.icon){if(n.title){a(i).prepend("&#160;")}a(i).prepend('<span class="ninjaFilmstripIcon"/>');a(".ninjaFilmstripIcon",i).ninjaIconCreate(n.icon).css({height:a(i).height(),position:"relative",top:"-2px"})}var f=a(i).prepend('<span class="ninjaFilmstripBack"/>').find(".ninjaFilmstripBack").ninjaButtonCreate({icon:"left"}).ninjaRadius({corners:"topLeft",radius:n.radius});var g=a(i).append('<span class="ninjaFilmstripForward"/>').find(".ninjaFilmstripForward").ninjaButtonCreate({icon:"right"}).ninjaRadius({corners:"topRight",radius:n.radius});frameOuterHeight=n.frameHeight+10;frameOuterWidth=n.frameWidth+11;a(d).height(frameOuterHeight+"px");a(k).height(frameOuterHeight+"px").width((frameOuterWidth*n.show)-1+"px");var b=Math.ceil(this.length/n.show);var h=1;a(i).width((frameOuterWidth*n.show)-1+"px");a(f).click(function(){if(h==1){a(d).animate({left:"-="+(frameOuterWidth*n.show*(b-1))});h=b}else{a(d).animate({left:"+="+(frameOuterWidth*n.show)});--h}n.onBack.call();a(f).ninjaButtonDeselect()});a(g).click(function(){if(h==b){a(d).animate({left:0});h=1}else{a(d).animate({left:"-="+(frameOuterWidth*n.show)});++h}n.onForward.call();a(g).ninjaButtonDeselect()});if(n.seconds>0){var c=n.seconds*1000;var j=0;(function l(){setTimeout(function(){if(j++<b){a(g).click();l()}},c)})()}return this};a.fn.ninjaFoldersCreate=function(b){var c=this;var d=a.extend({colors:a.ninjaColorsGet(),direction:"horizontal",onChange:function(){},radius:a.ninjaRadius,selected:a(c)[0]},b);var f,e;if(d.direction=="horizontal"){f=this.wrapAll('<div class="ninjaFolders"/>').parent();e=a(f).prepend('<div class="ninjaFoldersTabs"/>').children(".ninjaFoldersTabs")}else{var g=this.wrapAll('<td class="ninjaFoldersColumn"/>').parent();e=a(g).wrapAll('<table cellpadding="0" class="ninjaFolders"><tbody><tr/></tbody></table>').parent().prepend('<td><div class="ninjaFoldersTabs"/></td>').find(".ninjaFoldersTabs");f=a(g).closest(".ninjaFolders")}a(f).data({options:d});this.each(function(h,j){a(j).addClass("ninjaPaper").css(d.colors.background);if(d.direction=="horizontal"){a(e).append('<span class="ninjaPlastic ninjaEnabled">'+a(j).attr("title")+"</span>")}else{a(e).append('<div class="ninjaPlastic ninjaEnabled">'+a(j).attr("title")+"</div>")}});a(".ninjaPlastic:first-child",e).addClass("ninjaFoldersFirst").ninjaRadius({corners:"topLeft",radius:d.radius});if(d.direction=="horizontal"){a(".ninjaPlastic:last-child",e).ninjaRadius({corners:"topRight",radius:d.radius})}else{a(".ninjaPlastic:last-child",e).ninjaRadius({corners:"bottomLeft",radius:d.radius})}a(".ninjaPlastic",e).each(function(h,j){a(j).click(function(){a(c).ninjaFoldersToggle({init:false,selected:a(c)[h]})})});a(document).ready(function(){a(".ninjaPaper",f).each(function(h,j){a(j).css("min-height",a(e).height())}).ninjaFoldersToggle()});return this};a.fn.ninjaFoldersToggle=function(c){var e=this.parent().closest(".ninjaFolders");var d=a.extend(a(e).data().options,c);if(d.init===false){d.onChange.call(a(d.selected))}var b;this.each(function(f,g){if(a(g).attr("id")==a(d.selected).attr("id")){a(g).show();b=f}else{a(g).hide()}});a(".ninjaPlastic",e).each(function(f,g){if(b==f){a(g).addClass("ninjaSelected").css(d.colors.foregroundSelected)}else{a(g).removeClass("ninjaSelected").css(d.colors.foreground)}});return this};a.fn.ninjaIconAnimate=function(b){var c=a.extend({frames:0,frameCurrent:1,speed:100},b);return this.each(function(e,f){function d(){if(c.frameCurrent==c.frames){c.frameCurrent=0}a(f).css("backgroundPosition",(c.frameCurrent*-16)+"px center");c.frameCurrent++}setInterval(function(){d()},c.speed)})};a.fn.ninjaIconCreate=function(b){if(!b){b="add"}return this.each(function(c,d){a(d).addClass("ninjaIcon ninjaIcon-"+b.toLowerCase()).ninjaIconLightness()})};a.fn.ninjaIconLightness=function(){return this.each(function(b,c){if(a(c).parent().ninjaLightness()<125){a(c).addClass("ninjaIconWhite").removeClass("ninjaIconBlack")}else{a(c).addClass("ninjaIconBlack").removeClass("ninjaIconWhite")}})};a.fn.ninjaMenuCreate=function(b){var c=a.extend({colors:a.ninjaColorsGet(),icon:null,onSelect:function(){},radius:a.ninjaRadius,title:null,values:[]},b);return this.each(function(e,f){a(f).addClass("ninjaMenu").append('<div class="ninjaMenuButton"/><div class="ninjaMenuChoices"/>');var g=a(".ninjaMenuChoices",f);a(c.values).each(function(h,j){a(g).append('<div class="ninjaPlastic ninjaEnabled ninjaMenuChoice">'+j+"</span>")});a(".ninjaMenuChoice",g).each(function(j,h){a(h).css(c.colors.foreground).mouseover(function(){a(h).css(c.colors.foregroundSelected)}).mouseleave(function(){a(h).css(c.colors.foreground)}).click(function(){c.onSelect.call(a(h));a(d).ninjaButtonDeselect({onDeselect:a(g).slideUp()})})});a(".ninjaMenuChoice:first-child",g).ninjaRadius({corners:"top",radius:c.radius});a(".ninjaMenuChoice:last-child",g).ninjaRadius({corners:"bottom",radius:c.radius});var d=a(".ninjaMenuButton",f).ninjaButtonCreate({icon:c.icon,onDeselect:function(){a(g).slideUp()},onSelect:function(){a(g).mouseleave(function(){a(d).ninjaButtonDeselect({onDeselect:a(g).slideUp()})}).slideDown();a(document).keyup(function(h){if(h.keyCode==27){a(d).ninjaButtonDeselect({onDeselect:a(g).slideUp()});a(document).unbind("keyup")}})},title:c.title}).append('&#160;<span class="ninjaMenuIcon"/>');a(".ninjaMenuIcon",d).ninjaIconCreate("down").css({height:a(d).height(),position:"relative",top:"-2px"});a(g).ninjaRadius({radius:c.radius}).css({top:a(d).outerHeight()})})};a.ninjaMessageOpen=function(b){var d=a.extend({colors:a.ninjaColorsGet(),content:"",icon:null,onClose:function(){},onOpen:function(){},radius:a.ninjaRadius,seconds:0,title:null},b);var f=a(document.body).append('<div class="ninjaMessage"/>').find(".ninjaMessage").css({opacity:0.75}).append('<div class="ninjaPlastic"/><div class="ninjaPaper"/><div class="ninjaMessageReflection"/>');var h=null;if(d.seconds>0){var c=d.seconds*1000;h=setTimeout(function(){a(f).ninjaMessageClose()},c)}a(f).data({options:d});var g=a(".ninjaPlastic",f).css(d.colors.foreground);if(d.title){a(g).text(d.title)}if(d.icon){if(d.title){a(g).prepend("&#160;")}a(g).prepend('<span class="ninjaMessageIcon"/>');a(".ninjaMessageIcon",g).ninjaIconCreate(d.icon).css({height:a(g).height(),position:"relative",top:"-2px"})}a(g).append('<span class="ninjaMessageClose"/>');a(".ninjaMessageClose",g).ninjaButtonCreate({colors:d.colors,icon:"remove",onSelect:function(){a(f).ninjaMessageClose(h)}}).ninjaRadius({radius:"0"});var e=a(".ninjaPaper",f).html(d.content).css(d.colors.foreground).ninjaRadius({corners:"bottom",radius:d.radius});d.onOpen.call(f);a(".ninjaMessageReflection").css(d.colors.foreground).ninjaRadius({radius:d.radius}).position({at:"left bottom",of:f,my:"left top"}).css({opacity:0.125});a(document).keyup(function(i){if(i.keyCode==27){a(f).ninjaMessageClose(h);a(document).unbind("keyup")}});a(f).position({at:"top",collision:"fit none",of:window,my:"top"}).slideDown("slow")};a.fn.ninjaMessageClose=function(b){return this.each(function(d,e){clearTimeout(b);var c=a(e).data().options;a(e).slideUp("slow",function(){c.onClose.call();a(e).remove()})})};a.fn.ninjaNavigationCreate=function(b){var c=a.extend({colors:a.ninjaColorsGet(),radius:a.ninjaRadius},b);return this.each(function(e,d){a(d).addClass("ninjaPlastic ninjaNavigation").css(c.colors.foreground).ninjaRadius({radius:c.radius})})};a.fn.ninjaPanelCreate=function(b){var c=a.extend({colors:a.ninjaColorsGet(),icon:null,radius:a.ninjaRadius,title:null},b);return this.each(function(e,d){a(d).addClass("ninjaPaper ninjaPanel").css(c.colors.background).ninjaRadius({radius:c.radius});if(c.icon||c.title){a(d).prepend('<div class="ninjaPanelBar ninjaPlastic"/>');var f=a(".ninjaPanelBar",d).css(c.colors.foreground).ninjaRadius({corners:"top",radius:c.radius});if(c.title){a(f).text(c.title)}if(c.icon){if(c.title){a(f).prepend("&#160;")}a(f).prepend('<span class="ninjaPanelIcon"/>');a(".ninjaPanelIcon",d).ninjaIconCreate(c.icon).css({height:a(f).height(),position:"relative",top:"-2px"})}}})};a.ninjaRadius="0.5em";a.fn.ninjaRadius=function(b){var c=a.extend({corners:null,radius:a.ninjaRadius},b);var d;if(c.corners=="bottom"){d=[0,0,c.radius,c.radius]}else{if(c.corners=="bottomLeft"){d=[0,0,0,c.radius]}else{if(c.corners=="bottomRight"){d=[0,0,c.radius,0]}else{if(c.corners=="left"){d=[c.radius,0,0,c.radius]}else{if(c.corners=="right"){d=[0,c.radius,c.radius,0]}else{if(c.corners=="top"){d=[c.radius,c.radius,0,0]}else{if(c.corners=="topLeft"){d=[c.radius,0,0,0]}else{if(c.corners=="topRight"){d=[0,c.radius,0,0]}else{d=[c.radius,c.radius,c.radius,c.radius]}}}}}}}}return this.each(function(f,e){if(document.body.style.borderRadius!==undefined){if(d[0]==d[1]&&d[0]==d[2]&&d[0]==d[3]){a(e).css({"border-radius":d[0]})}else{a(e).css({"border-radius":d[0]+" "+d[1]+" "+d[2]+" "+d[3]})}}else{if(document.body.style.WebkitBorderRadius!==undefined){a(e).css({"-webkit-border-top-left-radius":d[0],"-webkit-border-top-right-radius":d[1],"-webkit-border-bottom-right-radius":d[2],"-webkit-border-bottom-left-radius":d[3]})}else{if(document.body.style.MozBorderRadius!==undefined){a(e).css({"-moz-border-radius-topleft":d[0],"-moz-border-radius-topright":d[1],"-moz-border-radius-bottomright":d[2],"-moz-border-radius-bottomleft":d[3]})}else{if(document.body.style.KhtmlBorderRadius!==undefined){a(e).css({"-khtml-border-top-left-radius":d[0],"-khtml-border-top-right-radius":d[1],"-khtml-border-bottom-right-radius":d[2],"-khtml-border-bottom-left-radius":d[3]})}}}}})};a.fn.ninjaRatingCreate=function(b){var c=a.extend({colors:a.ninjaColorsGet(),entity:"&#9733;",maximum:5,onChange:function(){},selectedGroup:0,selectedSingle:0},b);return this.each(function(d,e){for(d=1;d<=c.maximum;d++){a(e).append('<span class="ninjaRatingStar">'+c.entity+"</span>")}a(e).addClass("ninjaRating").data({options:c}).ninjaRatingUpdate().mouseleave(function(){a(e).ninjaRatingUpdate()});a(".ninjaRatingStar",e).each(function(f,g){if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)){a(g).css("font-size","18px")}a(g).mouseenter(function(){a(e).ninjaRatingUpdate({selectedSingle:f+1})}).click(function(){a.extend(a(e).data().options,{selectedSingle:f+1});a(e).ninjaRatingUpdate();c.onChange.call({maximum:c.maximum,selected:c.selectedSingle})})})})};a.fn.ninjaRatingUpdate=function(b){return this.each(function(d,e){var c=a.extend({},a(e).data().options,b);a(".ninjaRatingStar",e).each(function(f,g){if(c.selectedSingle>f){a(g).css({color:c.colors.rating.single})}else{if(c.selectedGroup>f){a(g).css({color:c.colors.rating.group})}else{a(g).css({color:c.colors.rating.unselected})}}})})};a.fn.ninjaSliderCreate=function(b){var c=a.extend({colors:a.ninjaColorsGet(),onStop:function(){},onUpdate:function(){},names:null,radius:a.ninjaRadius,selected:null,values:null,title:null,width:100},b);return this.each(function(t,s){var p=a(s).attr("id");if(c.title){a(s).append('<div class="ninjaSliderTitle">'+c.title+"</div>")}a(s).addClass("ninjaSlider").css(c.colors.background).ninjaRadius({radius:c.radius}).data({options:c});var o=c.selected||c.values[0];if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)){a(s).append('<select name="'+p+'"/>');var q=a("select",s);a.each(c.values,function(w,x){a(q).append('<option value="'+x+'">'+(c.names[w]||x)+"</option>")});a(q).val(o).width(c.width+"px").change(function(){var i=a(":selected",q);c.onStop.call({selectedName:a(i).text(),selectedValue:a(i).attr("value")})})}else{var l=c.values.length;var u=Math.round(c.width/l);var g=a.inArray(o,c.values);var f=c.names[g]||o;a(s).append('<input type="hidden"/><div class="ninjaSliderContainer"><div class="ninjaSliderTrack"><div class="ninjaSliderLevel"/></div><span class="ninjaPlastic ninjaEnabled ninjaSliderButton"/></div><div class="ninjaSliderText"/>');var d=a(".ninjaSliderButton",s).css(c.colors.foreground).ninjaRadius({radius:"0.8em"});var v=Math.round(a(d).outerWidth()/2);var j=u*(l-1);var m=a(".ninjaSliderContainer",s).width(j+(v*2)+"px");var r=a(".ninjaSliderTrack",s).width(j+"px").position({at:"center center",collision:"none none",of:m,my:"center center"}).ninjaRadius({radius:"0.5em"}).css(c.colors.foreground);var n=a(".ninjaSliderText",s).width(j+"px").text(f);var h=function(w,i){return w*i+"px"};var e=a(".ninjaSliderLevel",r).ninjaRadius({radius:"0.35em"}).css(c.colors.foregroundSelected).width(h(g,u));var k=a("input",s).attr("name",p);a(d).position({at:"left center",collision:"none none",of:m,offset:(g*u)+" 0",my:"left center"}).draggable({addClasses:false,axis:"x",containment:m,drag:function(){g=Math.round((a(d).position().left)/u);o=c.values[g];f=c.names[g]||o;a(e).width(h(g,u));a(n).text(f)},distance:u,grid:[u,0],scroll:false,stop:function(){a(k).val(o);c.onStop.call({selectedName:f,selectedValue:o})}})}})};a.fn.ninjaSliderUpdate=function(b){return this.each(function(f,d){var m=a.extend(a(d).data().options,b);var h=m.selected||m.values[0];var j=m.values.length;var l=Math.round(m.width/j);var k=a.inArray(h,m.values);var e=m.names[k]||h;m.onUpdate.call({selectedName:e,selectedValue:h});if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)){a("select",d).val(h)}else{var c=a(".ninjaSliderContainer",d);var g=a(".ninjaSliderButton",d).position({at:"left center",collision:"none",of:c,offset:(k*l)+" 0",my:"left"});a(".ninjaSliderLevel",d).width(k*l+"px");a(".ninjaSliderText",d).text(e)}})};a.fn.ninjaTabsCreate=function(b){var c=a.extend({colors:a.ninjaColorsGet(),id:null,onChange:function(){},radius:a.ninjaRadius,selected:this[0],side:null},b);var d=this.wrapAll("<span/>").parent().addClass("ninjaTabs").data({options:c});this.each(function(e,f){a(f).addClass("ninjaPlastic ninjaEnabled ninjaTab").click(function(){a(d).ninjaTabsToggle({init:false,selected:a(f)})});if(a(f).attr("title")){a(f).prepend("<span/>&#160;");a("span",f).ninjaIconCreate(a(f).attr("title")).css({height:a(f).height(),position:"relative",top:"-2px"})}});if(c.side=="left"){a(".ninjaTab:first-child",d).ninjaRadius({corners:"left",radius:c.radius}).addClass("ninjaFirst")}else{if(c.side=="right"){a(".ninjaTab:last-child",d).ninjaRadius({corners:"right",radius:c.radius})}else{a(".ninjaTab:first-child",d).ninjaRadius({corners:"left",radius:c.radius}).addClass("ninjaFirst");a(".ninjaTab:last-child",d).ninjaRadius({corners:"right",radius:c.radius})}}a(".ninjaTab:first-child",d).ninjaRadius({corners:"left",radius:c.radius}).addClass("ninjaFirst");a(d).ninjaTabsToggle();return this};a.fn.ninjaTabsToggle=function(b){return this.each(function(e,d){var c=a.extend(a(d).data().options,b);if(c.init===false){c.onChange.call(a(c.selected))}c.onChange.call();a(".ninjaTab",d).each(function(f,h){if(a(c.selected).attr("id")==a(h).attr("id")){a(h).addClass("ninjaSelected").css(c.colors.foregroundSelected)}else{a(h).removeClass("ninjaSelected").css(c.colors.foreground)}var g=a(".ninjaIcon",h);if(a(h).ninjaLightness()<125){a(g).addClass("ninjaIconWhite").removeClass("ninjaIconBlack")}else{a(g).addClass("ninjaIconBlack").removeClass("ninjaIconWhite")}})})};a.ninjaWaitStart=function(b){var d=a.extend({colors:a.ninjaColorsGet(),id:null,onStop:function(){},radius:a.ninjaRadius,seconds:0,text:"Updating..."},b);a(document.body).append('<div class="ninjaWaitOverlay"/><div class="ninjaWaitFrame"/>');var c=a(".ninjaWaitOverlay").css({opacity:0});var g=a(".ninjaWaitFrame").attr("id",d.id).css(d.colors.background).text(d.text).prepend('<span class="ninjaWaitIcon"/>&#160;').ninjaRadius({radius:d.radius}).append('<div class="ninjaWaitReflection"/>').data({options:d});a(".ninjaWaitReflection").css(d.colors.background).ninjaRadius({radius:d.radius}).position({at:"left bottom",of:g,my:"left top"}).css({opacity:0.125});if(a(g).ninjaLightness()<125){a(c).css({backgroundColor:"#fff"})}else{a(c).css({backgroundColor:"#000"})}var e=a(".ninjaWaitIcon",g);var f;if(a.browser.mozilla){f="0 "+a(window).scrollTop()}else{f=0}a(c).css({height:a(document.body).height(),width:a(window).width()}).animate({opacity:0.5},function(){a(g).position({at:"center",collision:"fit none",of:window,offset:f,my:"center"}).fadeIn(function(){a(e).ninjaIconAnimate({frames:12});if(d.seconds>0){var h=d.seconds*1000;setTimeout(function(){a(g).ninjaWaitStop()},h)}})});return this};a.fn.ninjaWaitStop=function(){return this.each(function(d,e){var c=a(e).data().options;var b=a(e).prev(".ninjaWaitOverlay");a(e).fadeOut(function(){a(b).fadeOut(function(){c.onStop.call();a(e).remove();a(b).remove()})})})};a.ninjaWindowOpen=function(b){var d=a.extend({colors:a.ninjaColorsGet(),icon:null,id:null,onClose:function(){},onOpen:function(){},radius:a.ninjaRadius,title:null,url:null,width:null},b);a(document.body).append('<div class="ninjaWindowOverlay"/><div class="ninjaWindowFrame"/>');var c=a(".ninjaWindowOverlay").css({opacity:0}).css(d.colors.background);var g=a(".ninjaWindowFrame").attr("id",d.id).append('<div class="ninjaPlastic ninjaWindowHandle"/><div class="ninjaPaper ninjaWindowContent"/><div class="ninjaWindowReflection"/>').data({options:d});if(d.width){a(g).css({minWidth:d.width})}var f=a(".ninjaWindowHandle",g).css(d.colors.foreground).ninjaRadius({corners:"top",radius:d.radius});if(d.title){a(f).text(d.title)}if(d.icon){if(d.title){a(f).prepend("&#160;")}a(f).prepend('<span class="ninjaWindowIcon"/>');a(".ninjaWindowIcon",f).ninjaIconCreate(d.icon).css({height:a(f).height(),position:"relative",top:"-2px"})}a(f).append('<span class="ninjaWindowClose"/>');a(".ninjaWindowClose",f).ninjaButtonCreate({icon:"remove",onSelect:function(){a(g).ninjaWindowClose()}}).ninjaRadius({corners:"topRight",radius:d.radius});var e=a(".ninjaWindowContent",g).css(d.colors.background).ninjaRadius({corners:"bottom",radius:d.radius});if(a(e).ninjaLightness()<125){a(c).css({backgroundColor:"#fff"})}else{a(c).css({backgroundColor:"#000"})}a(document).keyup(function(h){if(h.keyCode==27){a(g).ninjaWindowClose();a(document).unbind("keyup")}});a(g).click(function(h){h.stopPropagation()}).draggable({containment:"document",cursor:"pointer",handle:a(f)});a(e).load(d.url,function(){a(c).css({height:a(document).height(),width:a(window).width()}).animate({opacity:0.5},function(){var h=a(g).width();a(f).innerWidth(h);a(e).innerWidth(h);var i;if(a.browser.mozilla){i=a(window).scrollTop()+20}else{i=20}a(g).position({at:"center top",collision:"fit none",of:window,offset:"0 "+i,my:"center top"}).fadeIn(function(){d.onOpen.call(e)})});a(".ninjaWindowReflection").css(d.colors.background).ninjaRadius({radius:d.radius}).position({at:"left bottom",of:g,my:"left top"}).css({opacity:0.125})});return g};a.fn.ninjaWindowClose=function(){return this.each(function(d,e){var c=a(e).data().options;var b=a(e).prev(".ninjaWindowOverlay");a(e).fadeOut(function(){a(b).fadeOut(function(){c.onClose.call();a(e).remove();a(b).remove()})})})};a.fn.ninjaWindowRetitle=function(b){return this.each(function(d,e){var c=a.extend(a(e).data().options,{onRetitle:function(){}},b);a(".ninjaWindowHandle",e).text(c.title);a(".ninjaWindowIcon",e).attr({"class":""}).ninjaIconCreate(c.icon);c.onRetitle.call()})}})(jQuery);(function(a){a.groupRows=function(c,b){var d=this;d.$el=a(c);d.el=c;d.init=function(){d.options=a.extend({},a.groupRows.defaultOptions,b);var g=d.el.rows[0].childNodes.length;var h=d.el.rows.length-1;var i=0;var e=0;var f="_";a("tr",d.el).each(function(l){if(!(d.options.ignoreFirstRow==true&&l==0)){var n=this;var j=a.trim(a(n.cells[d.options.groupColumn]).text());if(j!=f){d.setGroupRecordCount(i,e);f=j;i++;var p=(f=="")?"[Blank]":f;p="<span class='groupRowTitle'>"+i+". "+p+"</span>";if(d.options.columnsForGroupRow.length>0){p+=": ";var o="";for(var l=0;l<d.options.columnsForGroupRow.length;l++){var k=d.options.columnsForGroupRow[l];o+=", "+a.trim(a(n.cells[k]).text())}o=o.substring(2);p+=o}var m=a("<tr class='groupRow group"+i+"'><td colspan='"+g+"' class='group"+i+"'>"+p+"</td></tr>");a(m).data("group",i);a(n).before(m);e=0}a(n).addClass("group"+i).addClass("groupData").data("group",i);e++}});d.setGroupRecordCount(i,e);a(".groupRow",d.el).click(function(){var j=a(this).data("group");a("tr.group"+j+":not(.groupRow)",d.el).toggle()}).hover(function(){a(this).css("cursor","pointer")});a(".groupData",d.el).hide()};d.setGroupRecordCount=function(e,f){var g=" ("+f+")";a("tr.group"+e+":not(.groupData) span.groupRowTitle",d.el).append(g)};d.init()};a.groupRows.defaultOptions={groupColumn:0,columnsForGroupRow:[],ignoreFirstRow:true};a.groupRows.destroy=function(b){a("tr.groupRow",b).remove();a("tr.groupData",b).removeClass("groupData").each(function(){a(this).removeClass("group"+a(this).data("group"))}).show()};a.fn.groupRows=function(b){return this.each(function(){(new a.groupRows(this,b))})}})(jQuery);